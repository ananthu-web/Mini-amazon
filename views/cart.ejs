<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Your Cart</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="/css/style.css">

</head>

<body class="bg-light">

  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-warning shadow fixed-top px-3 py-0">
  <div class="container-fluid">

    <!-- Logo -->
    <a class="navbar-brand fw-bold d-flex align-items-center" href="/">
      <img src="/images/Logo.png" alt="Mini Azaxon Logo"
        style="height:60px; width:auto; object-fit:contain; margin-right:8px; margin-left:15px; transform: scale(1.6);">
    </a>

    <!-- Hamburger for mobile -->
    <button class="btn btn-warning d-lg-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#mobileMenu"
        aria-controls="mobileMenu">
        <span class="navbar-toggler-icon"></span>
      </button>

    <!-- Desktop menu -->
    <div class="d-none d-lg-flex ms-auto align-items-center">

      <% if (!user) { %>
      <a href="/" class="btn btn-custom me-2 rounded-pill">üè† Home</a>
      <a href="/user/register" class="btn btn-custom me-2 rounded-pill">Sign Up</a>
      <a href="/user/login" class="btn btn-custom me-2 rounded-pill">Login</a>
      <% } else { %>
      <span class="me-2 fw-bold user-greeting">Hello, <%= user.username %></span>
      <a href="/" class="btn btn-custom me-2 rounded-pill">üè† Home</a>
      <a href="/logout" class="btn btn-custom me-2 rounded-pill">Logout</a>
      <% } %>

      <!-- Three-dots menu -->
      <div class="dropdown">
        <button class="btn btn-custom rounded-pill dropdown-toggle" type="button" id="moreMenu"
          data-bs-toggle="dropdown" aria-expanded="false">
          &#x22EE;
        </button>
        <ul class="dropdown-menu dropdown-menu-end dropdown-menu-square" aria-labelledby="moreMenu">
          <li><a class="dropdown-item" href="#">Profile</a></li>
          <li><a class="dropdown-item" href="#">Orders</a></li>
          <li><hr class="dropdown-divider"></li>
          <li><a class="dropdown-item" href="#">Help</a></li>
          <li><a class="dropdown-item" href="#">Settings</a></li>
        </ul>
      </div>

    </div>
  </div>
</nav>

  <!-- Offcanvas for mobile -->
  <<div class="offcanvas offcanvas-end rounded-offcanvas w-50 d-lg-none" tabindex="-1" id="mobileMenu"
  aria-labelledby="mobileMenuLabel">
  <div class="offcanvas-header">
    <h5 class="offcanvas-title" id="mobileMenuLabel">Menu</h5>
    <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
  </div>
  <div class="offcanvas-body d-flex flex-column">

    <% if (!user) { %>
      <a href="/" class="btn btn-custom mb-2 rounded-pill">üè† Home</a>
      <a href="/user/register" class="btn btn-custom mb-2 rounded-pill">Sign Up</a>
      <a href="/user/login" class="btn btn-custom mb-2 rounded-pill">Login</a>
      <a href="#" class="btn btn-custom mb-2 rounded-pill">Profile</a>
      <a href="#" class="btn btn-custom mb-2 rounded-pill">Orders</a>
      <a href="#" class="btn btn-custom mb-2 rounded-pill">Help</a>
      <a href="#" class="btn btn-custom mb-2 rounded-pill">Settings</a>
    <% } else { %>
      <span class="mb-2 fw-bold">Hello, <%= user.username %></span>
      <a href="/" class="btn btn-custom mb-2 rounded-pill">üè† Home</a>
      <a href="/logout" class="btn btn-custom mb-2 rounded-pill">Logout</a>
      <a href="#" class="btn btn-custom mb-2 rounded-pill">Profile</a>
      <a href="#" class="btn btn-custom mb-2 rounded-pill">Orders</a>
      <a href="#" class="btn btn-custom mb-2 rounded-pill">Help</a>
      <a href="#" class="btn btn-custom mb-2 rounded-pill">Settings</a>
    <% } %>

  </div>
</div>

  <div class="container my-5 pt-5">
    <h1 class="mb-4">Your Cart</h1>

    <% if (!cart || cart.length===0) { %>
      <p>Your cart is empty. <a href="/">Shop now!</a></p>
      <% } else { %>
        <ul class="list-group mb-4">
          <% cart.forEach(item=> { %>
            <li class="list-group-item d-flex justify-content-between align-items-center">
              <div>
                <strong>
                  <%= item.name %>
                </strong> (x<%= item.qty %>)
                  <br>
                  <small>$<%= item.price %> each</small>
              </div>

              <div class="d-flex align-items-center">
                <span class="fw-bold me-3">$<%= item.price * item.qty %></span>

                <!-- Decrease button -->
                <form action="/remove-from-cart" method="POST" style="display:inline;">
                  <input type="hidden" name="name" value="<%= item.name %>">
                  <button type="submit" class="btn btn-sm btn-danger">-</button>
                </form>

                <!-- Increase button -->
                <form action="/increase-qty" method="POST" style="display:inline; margin-left:5px;">
                  <input type="hidden" name="name" value="<%= item.name %>">
                  <button type="submit" class="btn btn-sm btn-success">+</button>
                </form>

                <!-- Remove All button -->
                <form action="/remove-item" method="POST" style="display:inline; margin-left:5px;">
                  <input type="hidden" name="name" value="<%= item.name %>">
                  <button type="submit" class="btn btn-sm btn-outline-dark">Remove All</button>
                </form>
              </div>
            </li>
            <% }) %>
        </ul>

        <h4>Total: $<%= total %>
        </h4>

        <!-- Checkout Form -->
        <form action="/checkout" method="POST">
          <button type="submit" class="btn btn-success w-100 btn-lg mb-3">Proceed to Checkout</button>
        </form>

        <a href="/" class="btn btn-outline-secondary w-100">Continue Shopping</a>
        <% } %>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>